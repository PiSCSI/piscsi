{% extends "base.html" %}

{% block content %}
<h2>{{ _("Upload File from Local Computer") }}</h2>
<section id="upload">
<ul>
    <li>{{ _("The largest file size accepted in this form is %(max_file_size)s MiB. Use other file transfer means for larger files.", max_file_size=max_file_size) }}</li>
    <li>{{ _("You have to manually clean up partially uploaded files, as a result of cancelling the upload or closing this page.") }}</li>
</ul>

<form name="dropper" action="/files/upload" method="post" class="dropzone dz-clickable" enctype="multipart/form-data" id="dropper">
    <p>
    <label for="upload_destination">{{ _("Destination:") }}</label>
    <select name="destination" id="upload_destination">
        <option value="images">{{ _("Disk Images") }} - {{ env["image_dir"] }}</option>
        <option value="file_server">{{ _("File Server") }} - {{ FILE_SERVER_DIR }}</option>
    </select>
    </p>
</form>

<script type="application/javascript">
    Dropzone.options.dropper = {
        paramName: 'file',
        url: '/files/upload',
        maxFilesize: {{ max_file_size }}, // max allowed file size in MiB
        chunking: true,
        forceChunking: true,
        parallelChunkUploads: false,
        chunkSize: 1048576, // 1 MiB
        retryChunks: true,
        retryChunksLimit: 3,
        createImageThumbnails: false,
        addRemoveLinks: true,
        dictDefaultMessage: "{{ _("Drop files here to upload") }}",
        dictFallbackMessage: "{{ _("Your browser does not support drag'n'drop file uploads.") }}",
        dictFallbackText: "{{ _("Please use the fallback form below to upload your files like in the olden days.") }}",
        dictFileTooBig: "{{ _("File is too big: {{filesize}}MiB. Max filesize: {{maxFilesize}}MiB.") }}",
        dictInvalidFileType: "{{ _("You can't upload files of this type.") }}",
        dictResponseError: "{{ _("Server responded with code: {{statusCode}}") }}",
        dictCancelUpload:" {{ _("Cancel upload") }}",
        dictUploadCanceled: "{{ _("Upload canceled.") }}",
        dictCancelUploadConfirmation: "{{ _("Are you sure you want to cancel this upload?") }}",
        dictRemoveFile: "{{ _("Dismiss") }}",
        dictMaxFilesExceeded: "{{ _("You can not upload any more files.") }}",
        dictFileSizeUnits: {
            tb: "{{ _("TiB") }}",
            gb: "{{ _("GiB") }}",
            mb: "{{ _("MiB") }}",
            kb: "{{ _("KiB") }}",
            b: "{{ _("B") }}"
        }
    }
</script>
</section>

{% endblock content %}
